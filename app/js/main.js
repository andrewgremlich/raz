"use strict";!function(){function t(){this.canvasElement=document.getElementById("myCanvas"),this.ctx=this.canvasElement.getContext("2d"),this.width=this.canvasElement.width,this.height=this.canvasElement.height}function e(t,e){this.width=10,this.height=10,this.x=t,this.y=e,this.xMotionSpeed=0,this.yMotionSpeed=0,this.radius=10}function i(t,e){t.beginPath(),t.arc(e.x,e.y,e.radius,0,2*Math.PI),t.fillStyle="#55b877",t.fill(),t.closePath()}function o(t){var e=t.canvas,i=t.player;e.clearFrame(),e.drawBorders(),i.drawPlayer(e.ctx),i.updatePlayerPosition(),i.collision(e.width,e.height)}t.prototype.drawBorders=function(){this.ctx.beginPath(),this.ctx.moveTo(2,2),this.ctx.lineTo(this.width-2,2),this.ctx.lineTo(this.width-2,this.height-2),this.ctx.lineTo(2,this.height-2),this.ctx.lineTo(2,2),this.ctx.stroke()},t.prototype.clearFrame=function(){this.ctx.clearRect(0,0,this.width,this.height)},e.prototype.drawPlayer=function(t){t.beginPath(),t.arc(this.x,this.y,this.radius,0,2*Math.PI),t.fillStyle="#558bb8",t.fill(),t.closePath()},e.prototype.updatePlayerPosition=function(){this.x+=this.xMotionSpeed,this.y+=this.yMotionSpeed},e.prototype.collision=function(t,e){var i=this.x+this.xMotionSpeed,o=this.y+this.yMotionSpeed;(i>t-this.radius||i<this.radius)&&(this.xMotionSpeed=-this.xMotionSpeed),(o>e-this.radius||o<this.radius)&&(this.yMotionSpeed=-this.yMotionSpeed)},e.prototype.movePlayer=function(){var t=this;document.onkeydown=function(e){t.xMotionSpeed=0,t.yMotionSpeed=0;var i=e.keyCode||e.which,o=i.toString(),n={37:function(){t.xMotionSpeed=t.xMotionSpeed-2,socket.emit("go left",t)},38:function(){t.yMotionSpeed=t.yMotionSpeed-2,socket.emit("go up",t)},39:function(){t.xMotionSpeed=t.xMotionSpeed+2,socket.emit("go right",t)},40:function(){t.yMotionSpeed=t.yMotionSpeed+2,socket.emit("go down",t)}};n[o]()},document.onkeyup=function(){t.xMotionSpeed=0,t.yMotionSpeed=0,socket.emit("reset motion",t)}};var n=io();document.querySelector("canvas").width=window.innerWidth,document.querySelector("canvas").height=window.innerHeight;var s=new t;n.on("user connected",function(t){console.log("user connected",t)}),n.on("lobbyUser",function(t){console.log(t)}),n.on("on left",function(t){i(s.ctx,t)}),n.on("on up",function(t){i(s.ctx,t)}),n.on("on right",function(t){i(s.ctx,t)}),n.on("on down",function(t){i(s.ctx,t)}),n.on("on reset",function(t){i(s.ctx,t)}),n.on("user left",function(t){console.log(t)}),document.querySelector('input[type="button"]').onclick=function(t){var i=t.target||t.srcElement,c=i.previousElementSibling,h=c.value,a=i.parentElement,r=a.nextElementSibling;n.emit("add user to game",h),n.on("login",function(t){var i=t.clientData.player.x,n=t.clientData.player.y,c={canvas:s,player:new e(i,n)};a.style.display="none",r.style.display="block",c.player.movePlayer(),window.inter=setInterval(function(){o(c)},10)})}}();